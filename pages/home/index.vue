<template>

  <div class="home-page" :style="{ backgroundImage: `url(${backgroundImg})` }">
    <SakuraEffect />
    <!-- HEADER -->
    <header class="app-header">
      <button class="user-btn" @click="showUserMenu">
        <Image src="/home/cosmic_user_avatar.png" class="user-avatar-img" alt="User Profile"></Image>
      </button>
    </header>

    <div class="feature-cards-container">
      <!-- Top-Left: G√µ M√µ -->
      <div class="feature-bubble card-top-left" @click="navigateTo('/goMo')"
        :style="{ backgroundImage: `url(${bubbleImg})`, backgroundSize: 'cover' }">
        <div class="icon-wrapper">
          <Image src="/home/icon/goMo.png" class="card-icon-img" alt="G√µ M√µ"></Image>
        </div>
        <div class="card-title">G√µ M√µ</div>
      </div>

      <!-- Mid-Left: H≈© T√¢m S·ª± -->
      <div class="feature-bubble card-mid-left" @click="navigateTo('/worry-jar')"
        :style="{ backgroundImage: `url(${bubbleImg})`, backgroundSize: 'cover' }">
        <div class="icon-wrapper">
          <Image src="/home/icon/hoTamSu.png" class="card-icon-img" alt="H·ªì T√¢m S·ª±"></Image>
        </div>
        <div class="card-title">H·ªì T√¢m S·ª±</div>
      </div>

      <!-- Top-Right: Ph√≥ng ƒêƒÉng -->
      <div class="feature-bubble card-top-right" @click="navigateTo('/altar')"
        :style="{ backgroundImage: `url(${bubbleImg})`, backgroundSize: 'cover' }">
        <div class="icon-wrapper">
          <Image src="/home/icon/phongDang.png" class="card-icon-img" alt="Ph√≥ng ƒêƒÉng"></Image>
        </div>
        <div class="card-title">Ph√≥ng ƒêƒÉng</div>
      </div>

      <!-- Mid-Right: Th·∫Øp Nhang -->
      <div class="feature-bubble card-mid-right" @click="navigateTo('/altar')"
        :style="{ backgroundImage: `url(${bubbleImg})`, backgroundSize: 'cover' }">
        <div class="icon-wrapper">
          <Image src="/home/icon/thapNhang.png" class="card-icon-img" alt="Th·∫Øp Nhang"></Image>
        </div>
        <div class="card-title">Th·∫Øp Nhang</div>
      </div>

      <!-- Bottom-Center-Left: Huy·ªÅn H·ªçc -->
      <div class="feature-bubble card-bottom-left" @click="navigateTo('/divination')"
        :style="{ backgroundImage: `url(${bubbleImg})`, backgroundSize: 'cover' }">
        <div class="icon-wrapper">
          <Image src="/home/icon/huyenHoc.png" class="card-icon-img" alt="Huy·ªÅn H·ªçc"></Image>
        </div>
        <div class="card-title">Huy·ªÅn H·ªçc</div>
      </div>

      <!-- Bottom-Center-Right: Linh V·∫≠t -->
      <div class="feature-bubble card-bottom-right" @click="navigateTo('/shop')"
        :style="{ backgroundImage: `url(${bubbleImg})`, backgroundSize: 'cover' }">
        <div class="icon-wrapper">
          <Image src="/home/icon/linhVat.png" class="card-icon-img" alt="Linh V·∫≠t"></Image>
        </div>
        <div class="card-title">Linh V·∫≠t</div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { useRouter } from 'vue-router';
import { useAuth } from '../composables/useAuth';
import backgroundImg from '../assets/phatNgoiHoaSenRes.png';
import bubbleImg from '../assets/bubble.png';
import SakuraEffect from '../components/effects/SakuraEffect.vue';

const router = useRouter()
const { getUserEmail } = useAuth()

const navigateTo = (path) => {
  if (path === '/altar' || path === '/divination' || path === '/shop') {
    alert('T√≠nh nƒÉng ƒëang ph√°t tri·ªÉn üôè')
  } else {
    router.push(path)
  }
}

const toggleMenu = () => {
  console.log('Menu toggled')
}

const showUserMenu = () => {
  console.log('User menu')
}

const getUserInitial = () => {
  const email = getUserEmail()
  return email ? email.charAt(0).toUpperCase() : 'U'
}
</script>

<style scoped src="./index.css"></style>
